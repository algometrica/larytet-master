= Source Tree =

  * In the root [http://code.google.com/p/larytet-master/source/browse/#svn/trunk/JQuant JQuant/] you will find code responsible for the infrastructure - [http://code.google.com/p/larytet-master/source/browse/trunk/JQuant/Mailbox.cs Mailbox], Pool, [http://code.google.com/p/larytet-master/source/browse/trunk/JQuant/CyclicBuffer.cs CyclicBuffer].
  * In the folder JQuant/FMR there is a thin shell above TaskBarLib. Most of the calls to the FRM API are done here.
  * Folder JQuant/FMRSim is an application which contains all CLI commands, class Main. Also TaskBarLib simulation is in this folder.

= Playback =

Playback is done by MaofDataGeneratorLogFile in the file [http://code.google.com/p/larytet-master/source/browse/trunk/JQuant/FMRSim/TaskBarLibSim.cs TaskBalibSim]. The object opens specified log file (currently only CVS format is supported), parses the fields, feeds the TaskBarSim. TaskBarSim generates the data feed and forwards to the application via FMR Stream API. 

The playback follows carefully the timestamps in the log file. Playback API supports arbitrary acceleration. Playback of one trading day takes about 10 minutes on the low end Windows machine.


= Example of the CLI session =
<pre>
$ FMRSim/bin/Debug/FMRSim.exe 
Running under Unix 2.6.31.21
JQuant - Main menu
=====================================
help, exit, one level up - .., main menu - ~

oper - Operations
dbg - System debug info
tst - Short tests
SIM:$ oper
JQuant - oper
=====================================
help, exit, one level up - .., main menu - ~

Login - Login to the remote server
Logout - Perform the logout process
StartLog - Log data stream - choose MF|RZ|MDD.
StopLog - Stop log - MF|MDD|RZ, to stop stream type Y
StopStream - Stop the data stream - MF | MDD | RZ
ShowLog - Show existing loggers
AS400TimeTest - Ping the server

SIM:$ login
SessionId is 1


0    10   20   30   40   50   60   70   80   90  100
|----+----+----+----+----+----+----+----+----+----|
..................................................
Connection opened for aryeh
sessionId=1
Login status is LoginSessionActive

SIM:$ startlog mf
Maof log file /home/arkady/JQuantAssembla/DataLogs/MaofLog_9_5_2010_6_26_41_PM.csv
DT= Maof (0)
      Name Triggered    Logged   Dropped  Log type                  Latest                  Oldest   Stamped
-----------------------------------------------------------------------------------------------------------------------
MaofLogger         0         0         0       CSV    1/1/0001 12:00:00 AM    1/1/0001 12:00:00 AM     False

SIM:$ showlog
      Name Triggered    Logged   Dropped  Log type                  Latest                  Oldest   Stamped
-----------------------------------------------------------------------------------------------------------------------
MaofLogger     88129     88128         0       CSV     9/5/2010 6:26:47 PM     9/5/2010 6:26:41 PM     False

SIM:$ 
</pre>

= Example of test =
<pre>
SIM:$ tst
JQuant - tst
=====================================
help, exit, one level up - .., main menu - ~

GC - Run garbage collector
mbxTest - Run simple mailbox tests
mbxShow - Show mailboxes
threadTest - Run simple thread
threadShow - Show threads
poolTest - Run simple pool tests
poolShow - Show pools
timerTest - Run simple timer tests
timerShow - Show timers
threadPoolTest - Run simple thread pool tests
threadPoolShow - Show thread pools
cbtest - Cyclic buffer class test
rtclock - RT clock test
rtclock_1 - RT clock test
rtclock_2 - RT clock test
logTest - File logger test

SIM:$ mbxTest
TestMbx created
Mailbox.Send message sent
Mailbox.Send message received

    Name    Size MaxCoun Pending Timeout Receive    Sent Dropped
                       t                       d                
----------------------------------------------------------------
 TestMbx       2       1       0       0       1       1       0

SIM:$ threadPoolTest

    Name Threads    Jobs MinThre MaxJobs   Start    Done Running PlacedJ Pending Running FailedP FailedR
                         adsFree                         Threads     obs    Jobs    Jobs laceJob efreshQ
                                                                                                    ueue
--------------------------------------------------------------------------------------------------------
    test       1       5       0       2       5       5       0       5       0       0       0       4
ThreadPoolJob done  idx =0, time = 15 micros
ThreadPoolJob done  idx =1, time = 17 micros
ThreadPoolJob done  idx =2, time = 1074 micros
ThreadPoolJob done  idx =3, time = 2133 micros
ThreadPoolJob done  idx =4, time = 3192 micros

SIM:$ ThreadPool test destroyed

SIM:$ ..
JQuant - Main menu
=====================================
help, exit, one level up - .., main menu - ~

oper - Operations
dbg - System debug info
tst - Short tests

SIM:$ exit

</pre>